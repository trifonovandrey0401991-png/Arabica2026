# Быстрое исправление ошибки регистрации

## Проблема
```
Ошибка регистрации: Failed to fetch, uri=http://127.0.0.1:3000
```

## Решение (выберите один вариант)

### Вариант 1: Запустить прокси-сервер (для разработки в браузере)

1. **Откройте новый терминал/PowerShell**

2. **Перейдите в папку прокси:**
   ```powershell
   cd arabica_app\loyalty-proxy
   ```

3. **Установите зависимости (только первый раз):**
   ```powershell
   npm install
   ```

4. **Запустите прокси-сервер:**
   ```powershell
   node index.js
   ```
   
   Должно появиться: `Proxy listening on port 3000`

5. **Оставьте этот терминал открытым** и вернитесь к приложению

6. **Обновите конфигурацию приложения:**
   
   Откройте файл `lib/google_script_config.dart` и измените на:
   ```dart
   const String googleScriptUrl = 'http://127.0.0.1:3000';
   ```

7. **Перезапустите приложение:**
   ```powershell
   flutter run -d chrome
   ```

### Вариант 2: Использовать прямой URL (если сервер доступен)

1. **Проверьте, что сервер `https://arabica26.ru` работает:**
   
   Откройте в браузере:
   ```
   https://arabica26.ru?action=getClient&phone=%2B79001234567
   ```

2. **Если сервер работает, убедитесь, что в `lib/google_script_config.dart`:**
   ```dart
   const String googleScriptUrl = 'https://arabica26.ru';
   ```

3. **Если сервер не работает или есть проблемы с CORS:**
   - Используйте Вариант 1 (прокси-сервер)

### Вариант 3: Для мобильного приложения (Android/iOS)

Для мобильных приложений обычно можно использовать прямой URL без прокси:

1. Убедитесь, что в `lib/google_script_config.dart`:
   ```dart
   const String googleScriptUrl = 'https://arabica26.ru';
   ```

2. Запустите на устройстве:
   ```powershell
   flutter run -d android
   # или
   flutter run -d ios
   ```

## Проверка работы

После исправления:

1. Запустите приложение
2. Попробуйте зарегистрироваться
3. Если регистрация прошла успешно, вы увидите главное меню с приветствием

## Если проблема сохраняется

1. **Проверьте логи прокси-сервера** (если используете прокси)
2. **Проверьте консоль браузера** (F12 → Console)
3. **Убедитесь, что сервер доступен:**
   ```powershell
   # PowerShell
   Invoke-WebRequest -Uri "https://arabica26.ru"
   ```





