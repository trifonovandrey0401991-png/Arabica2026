<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1400">
  <!-- Background -->
  <rect width="1400" height="1400" fill="#f5f5f5"/>

  <!-- Title -->
  <text x="700" y="40" text-anchor="middle" font-family="Arial, sans-serif" font-size="28" font-weight="bold" fill="#004D40">Система заказов клиентов - Arabica</text>
  <text x="700" y="65" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" fill="#666">Версия 1.6.1 | Последнее обновление: Январь 2026</text>

  <!-- КЛИЕНТ Section -->
  <rect x="50" y="100" width="500" height="300" rx="10" fill="#E8F5E9" stroke="#4CAF50" stroke-width="2"/>
  <text x="300" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#2E7D32">КЛИЕНТ</text>

  <!-- 1. Меню -->
  <rect x="80" y="160" width="120" height="60" rx="8" fill="#004D40" stroke="#00251a" stroke-width="2"/>
  <text x="140" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Меню</text>

  <!-- Arrow 1 -> 2 -->
  <path d="M200 190 L240 190" stroke="#004D40" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- 2. Корзина -->
  <rect x="260" y="160" width="120" height="60" rx="8" fill="#004D40" stroke="#00251a" stroke-width="2"/>
  <text x="320" y="195" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Корзина</text>

  <!-- Arrow 2 -> time dialog -->
  <path d="M320 220 L320 260" stroke="#004D40" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- Time selection -->
  <rect x="260" y="270" width="120" height="50" rx="8" fill="#81C784" stroke="#4CAF50" stroke-width="2"/>
  <text x="320" y="292" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Время получения</text>
  <text x="320" y="308" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="white">5/10/15/30 мин</text>

  <!-- Arrow to Мои Заказы -->
  <path d="M380 295 L420 295 L420 195 L460 195" stroke="#004D40" stroke-width="3" fill="none" marker-end="url(#arrowhead)"/>

  <!-- 3. Мои Заказы -->
  <rect x="400" y="160" width="120" height="60" rx="8" fill="#004D40" stroke="#00251a" stroke-width="2"/>
  <text x="460" y="185" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Мои</text>
  <text x="460" y="205" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Заказы</text>

  <!-- СОТРУДНИК Section -->
  <rect x="600" y="100" width="280" height="300" rx="10" fill="#E3F2FD" stroke="#2196F3" stroke-width="2"/>
  <text x="740" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#1565C0">СОТРУДНИК</text>

  <!-- 4. Заказы Клиентов (сотрудник) -->
  <rect x="640" y="160" width="200" height="70" rx="8" fill="#1976D2" stroke="#0D47A1" stroke-width="2"/>
  <text x="740" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Заказы Клиентов</text>
  <text x="740" y="215" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#BBDEFB">(только ожидающие)</text>

  <!-- 6. Моя Эффективность -->
  <rect x="640" y="260" width="200" height="70" rx="8" fill="#1976D2" stroke="#0D47A1" stroke-width="2"/>
  <text x="740" y="290" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="white">Моя Эффективность</text>
  <text x="740" y="315" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#BBDEFB">(баллы за заказы)</text>

  <!-- Arrow between them -->
  <path d="M740 230 L740 260" stroke="#1976D2" stroke-width="2" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="760" y="248" font-family="Arial, sans-serif" font-size="10" fill="#1976D2">+баллы</text>

  <!-- АДМИН Section -->
  <rect x="930" y="100" width="420" height="300" rx="10" fill="#FFF3E0" stroke="#FF9800" stroke-width="2"/>
  <text x="1140" y="130" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#E65100">АДМИН</text>

  <!-- 5. Отчёты (Заказы клиентов) -->
  <rect x="960" y="160" width="180" height="90" rx="8" fill="#F57C00" stroke="#E65100" stroke-width="2"/>
  <text x="1050" y="190" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Отчёты</text>
  <text x="1050" y="210" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">(Заказы клиентов)</text>
  <text x="1050" y="235" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#FFE0B2">4 вкладки</text>

  <!-- 4 tabs details -->
  <rect x="1160" y="160" width="170" height="90" rx="8" fill="#FFE0B2" stroke="#FFB74D" stroke-width="1"/>
  <text x="1245" y="180" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E65100">• Ожидают (pending)</text>
  <text x="1245" y="198" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E65100">• Выполнено (accepted)</text>
  <text x="1245" y="216" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E65100">• Отказано (rejected)</text>
  <text x="1245" y="234" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#E65100">• Не подтв. (unconfirmed)</text>

  <!-- 7. Эффективность сотрудников -->
  <rect x="960" y="280" width="180" height="70" rx="8" fill="#F57C00" stroke="#E65100" stroke-width="2"/>
  <text x="1050" y="310" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">Эффективность</text>
  <text x="1050" y="330" text-anchor="middle" font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="white">сотрудников</text>

  <!-- SERVER Section -->
  <rect x="300" y="450" width="800" height="150" rx="10" fill="#ECEFF1" stroke="#607D8B" stroke-width="2"/>
  <text x="700" y="480" text-anchor="middle" font-family="Arial, sans-serif" font-size="20" font-weight="bold" fill="#37474F">СЕРВЕР (arabica26.ru)</text>

  <!-- API Orders -->
  <rect x="340" y="500" width="140" height="50" rx="8" fill="#607D8B" stroke="#37474F" stroke-width="2"/>
  <text x="410" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">/api/orders</text>

  <!-- Database -->
  <rect x="510" y="500" width="160" height="50" rx="8" fill="#607D8B" stroke="#37474F" stroke-width="2"/>
  <text x="590" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="white">/var/www/orders</text>

  <!-- Push Notifications -->
  <rect x="700" y="500" width="120" height="50" rx="8" fill="#607D8B" stroke="#37474F" stroke-width="2"/>
  <text x="760" y="522" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="white">Push FCM</text>
  <text x="760" y="540" text-anchor="middle" font-family="Arial, sans-serif" font-size="10" fill="white">Firebase</text>

  <!-- FCM Tokens -->
  <rect x="850" y="500" width="160" height="50" rx="8" fill="#607D8B" stroke="#37474F" stroke-width="2"/>
  <text x="930" y="530" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" font-weight="bold" fill="white">/var/www/fcm-tokens</text>

  <!-- Arrows to Server -->
  <path d="M320 320 L320 380 L410 380 L410 500" stroke="#4CAF50" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowGreen)"/>
  <text x="350" y="375" font-family="Arial, sans-serif" font-size="11" fill="#4CAF50">POST создать</text>

  <path d="M740 330 L740 380 L590 380 L590 500" stroke="#2196F3" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowBlue)"/>
  <text x="660" y="375" font-family="Arial, sans-serif" font-size="11" fill="#2196F3">PUT статус</text>

  <path d="M1050 350 L1050 380 L760 380 L760 500" stroke="#FF9800" stroke-width="2" stroke-dasharray="5,5" fill="none" marker-end="url(#arrowOrange)"/>
  <text x="900" y="375" font-family="Arial, sans-serif" font-size="11" fill="#FF9800">GET все статусы</text>

  <!-- Push arrows -->
  <path d="M760 500 L760 420 L740 420 L740 330" stroke="#9C27B0" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
  <text x="780" y="410" font-family="Arial, sans-serif" font-size="10" fill="#9C27B0">push: новый заказ</text>

  <path d="M760 500 L760 420 L460 420 L460 220" stroke="#9C27B0" stroke-width="2" fill="none" marker-end="url(#arrowPurple)"/>
  <text x="560" y="435" font-family="Arial, sans-serif" font-size="10" fill="#9C27B0">push: статус изменён</text>

  <!-- ==================== ОПИСАНИЕ ==================== -->

  <!-- Description Section -->
  <rect x="50" y="650" width="1300" height="720" rx="10" fill="white" stroke="#ddd" stroke-width="1"/>
  <text x="700" y="685" text-anchor="middle" font-family="Arial, sans-serif" font-size="22" font-weight="bold" fill="#004D40">ОПИСАНИЕ СИСТЕМЫ ЗАКАЗОВ</text>

  <!-- 1. Клиент -->
  <rect x="70" y="710" width="400" height="200" rx="8" fill="#E8F5E9" stroke="#4CAF50" stroke-width="1"/>
  <text x="270" y="735" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#2E7D32">1. КЛИЕНТ</text>

  <text x="85" y="760" font-family="Arial, sans-serif" font-size="12" fill="#333">Файлы:</text>
  <text x="85" y="778" font-family="Arial, sans-serif" font-size="11" fill="#666">• menu_page.dart - выбор товаров</text>
  <text x="85" y="794" font-family="Arial, sans-serif" font-size="11" fill="#666">• cart_page.dart - корзина + время получения</text>
  <text x="85" y="810" font-family="Arial, sans-serif" font-size="11" fill="#666">• orders_page.dart - мои заказы (клиент)</text>

  <text x="85" y="835" font-family="Arial, sans-serif" font-size="12" fill="#333">Функции:</text>
  <text x="85" y="853" font-family="Arial, sans-serif" font-size="11" fill="#666">• Добавление товаров в корзину</text>
  <text x="85" y="869" font-family="Arial, sans-serif" font-size="11" fill="#666">• Выбор времени получения (5/10/15/30 мин)</text>
  <text x="85" y="885" font-family="Arial, sans-serif" font-size="11" fill="#666">• Отправка заказа на сервер</text>
  <text x="85" y="901" font-family="Arial, sans-serif" font-size="11" fill="#666">• Просмотр статуса своих заказов</text>

  <!-- 2. Сотрудник -->
  <rect x="490" y="710" width="400" height="200" rx="8" fill="#E3F2FD" stroke="#2196F3" stroke-width="1"/>
  <text x="690" y="735" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#1565C0">2. СОТРУДНИК</text>

  <text x="505" y="760" font-family="Arial, sans-serif" font-size="12" fill="#333">Файлы:</text>
  <text x="505" y="778" font-family="Arial, sans-serif" font-size="11" fill="#666">• employee_orders_page.dart - только pending</text>
  <text x="505" y="794" font-family="Arial, sans-serif" font-size="11" fill="#666">• employee_order_detail_page.dart - детали</text>
  <text x="505" y="810" font-family="Arial, sans-serif" font-size="11" fill="#666">• my_efficiency_page.dart - мои баллы</text>

  <text x="505" y="835" font-family="Arial, sans-serif" font-size="12" fill="#333">Функции:</text>
  <text x="505" y="853" font-family="Arial, sans-serif" font-size="11" fill="#666">• Просмотр ТОЛЬКО ожидающих заказов</text>
  <text x="505" y="869" font-family="Arial, sans-serif" font-size="11" fill="#666">• Принять заказ (accepted)</text>
  <text x="505" y="885" font-family="Arial, sans-serif" font-size="11" fill="#666">• Отклонить заказ (rejected + причина)</text>
  <text x="505" y="901" font-family="Arial, sans-serif" font-size="11" fill="#666">• Получение баллов эффективности</text>

  <!-- 3. Админ -->
  <rect x="910" y="710" width="420" height="200" rx="8" fill="#FFF3E0" stroke="#FF9800" stroke-width="1"/>
  <text x="1120" y="735" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#E65100">3. АДМИН</text>

  <text x="925" y="760" font-family="Arial, sans-serif" font-size="12" fill="#333">Файлы:</text>
  <text x="925" y="778" font-family="Arial, sans-serif" font-size="11" fill="#666">• orders_report_page.dart - 4 вкладки</text>
  <text x="925" y="794" font-family="Arial, sans-serif" font-size="11" fill="#666">• employees_efficiency_page.dart - все сотрудники</text>
  <text x="925" y="810" font-family="Arial, sans-serif" font-size="11" fill="#666">• reports_page.dart - раздел "Отчёты"</text>

  <text x="925" y="835" font-family="Arial, sans-serif" font-size="12" fill="#333">Функции:</text>
  <text x="925" y="853" font-family="Arial, sans-serif" font-size="11" fill="#666">• Просмотр ВСЕХ заказов (4 статуса)</text>
  <text x="925" y="869" font-family="Arial, sans-serif" font-size="11" fill="#666">• Анализ ожидающих/выполненных/отказов</text>
  <text x="925" y="885" font-family="Arial, sans-serif" font-size="11" fill="#666">• Просмотр не подтверждённых вовремя</text>
  <text x="925" y="901" font-family="Arial, sans-serif" font-size="11" fill="#666">• Эффективность всех сотрудников</text>

  <!-- 4. Сервер -->
  <rect x="70" y="930" width="620" height="200" rx="8" fill="#ECEFF1" stroke="#607D8B" stroke-width="1"/>
  <text x="380" y="955" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#37474F">4. СЕРВЕР (Node.js)</text>

  <text x="85" y="980" font-family="Arial, sans-serif" font-size="12" fill="#333">Файлы:</text>
  <text x="85" y="998" font-family="Arial, sans-serif" font-size="11" fill="#666">• loyalty-proxy/modules/orders.js - CRUD заказов</text>
  <text x="85" y="1014" font-family="Arial, sans-serif" font-size="11" fill="#666">• loyalty-proxy/order_notifications_api.js - push</text>
  <text x="85" y="1030" font-family="Arial, sans-serif" font-size="11" fill="#666">• loyalty-proxy/index.js - роуты API</text>

  <text x="85" y="1055" font-family="Arial, sans-serif" font-size="12" fill="#333">API эндпоинты:</text>
  <text x="85" y="1073" font-family="Arial, sans-serif" font-size="11" fill="#666">• POST /api/orders - создать заказ</text>
  <text x="85" y="1089" font-family="Arial, sans-serif" font-size="11" fill="#666">• GET /api/orders?status=X - получить заказы</text>
  <text x="85" y="1105" font-family="Arial, sans-serif" font-size="11" fill="#666">• PUT /api/orders/:id/accept - принять</text>
  <text x="85" y="1121" font-family="Arial, sans-serif" font-size="11" fill="#666">• PUT /api/orders/:id/reject - отклонить</text>

  <!-- 5. Push -->
  <rect x="710" y="930" width="620" height="200" rx="8" fill="#F3E5F5" stroke="#9C27B0" stroke-width="1"/>
  <text x="1020" y="955" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#7B1FA2">5. PUSH-УВЕДОМЛЕНИЯ</text>

  <text x="725" y="980" font-family="Arial, sans-serif" font-size="12" fill="#333">Технология: Firebase Cloud Messaging (FCM)</text>

  <text x="725" y="1005" font-family="Arial, sans-serif" font-size="12" fill="#333">Когда отправляется:</text>
  <text x="725" y="1023" font-family="Arial, sans-serif" font-size="11" fill="#666">• Клиент создал заказ → push сотрудникам на смене</text>
  <text x="725" y="1039" font-family="Arial, sans-serif" font-size="11" fill="#666">• Сотрудник принял → push клиенту</text>
  <text x="725" y="1055" font-family="Arial, sans-serif" font-size="11" fill="#666">• Сотрудник отклонил → push клиенту</text>

  <text x="725" y="1080" font-family="Arial, sans-serif" font-size="12" fill="#333">Хранение токенов:</text>
  <text x="725" y="1098" font-family="Arial, sans-serif" font-size="11" fill="#666">• /var/www/fcm-tokens/{phone}.json</text>
  <text x="725" y="1114" font-family="Arial, sans-serif" font-size="11" fill="#666">• Токен сохраняется после входа в приложение</text>

  <!-- Статусы заказов -->
  <rect x="70" y="1150" width="1260" height="90" rx="8" fill="#FFFDE7" stroke="#FBC02D" stroke-width="1"/>
  <text x="700" y="1175" text-anchor="middle" font-family="Arial, sans-serif" font-size="16" font-weight="bold" fill="#F57F17">СТАТУСЫ ЗАКАЗОВ</text>

  <text x="150" y="1205" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#FF9800">pending</text>
  <text x="150" y="1225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Ожидает</text>

  <text x="350" y="1195" font-family="Arial, sans-serif" font-size="20" fill="#666">→</text>

  <text x="450" y="1205" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#4CAF50">accepted</text>
  <text x="450" y="1225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Принят</text>

  <text x="550" y="1195" font-family="Arial, sans-serif" font-size="14" fill="#666">или</text>

  <text x="650" y="1205" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#F44336">rejected</text>
  <text x="650" y="1225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Отклонён</text>

  <text x="750" y="1195" font-family="Arial, sans-serif" font-size="14" fill="#666">или</text>

  <text x="900" y="1205" text-anchor="middle" font-family="Arial, sans-serif" font-size="13" font-weight="bold" fill="#FF5722">unconfirmed</text>
  <text x="900" y="1225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">Не подтверждён вовремя (таймаут)</text>

  <!-- Баллы -->
  <text x="1150" y="1205" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" font-weight="bold" fill="#1976D2">Баллы:</text>
  <text x="1150" y="1225" text-anchor="middle" font-family="Arial, sans-serif" font-size="11" fill="#666">+N за принятый заказ</text>

  <!-- Версия -->
  <text x="700" y="1270" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#999">Путь к файлам Flutter: lib/features/orders/</text>
  <text x="700" y="1290" text-anchor="middle" font-family="Arial, sans-serif" font-size="12" fill="#999">Путь к файлам сервера: loyalty-proxy/modules/orders.js</text>

  <!-- Arrow markers -->
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#004D40"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4CAF50"/>
    </marker>
    <marker id="arrowBlue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#2196F3"/>
    </marker>
    <marker id="arrowOrange" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#FF9800"/>
    </marker>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#9C27B0"/>
    </marker>
  </defs>
</svg>
