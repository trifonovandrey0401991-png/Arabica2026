# Инструкция по настройке функционала "Пересменка"

## 1. Установка зависимостей

Выполните на вашем ПК:
```bash
cd arabica2026
git pull origin main
flutter pub get
```

## 2. Настройка Google Apps Script для загрузки фото

### Шаг 1: Создайте папку в Google Drive
1. Откройте Google Drive
2. Создайте новую папку (например, "Arabica Shift Photos")
3. Скопируйте ID папки из URL (после `/folders/`)

### Шаг 2: Создайте Google Apps Script
1. Откройте https://script.google.com
2. Создайте новый проект
3. Скопируйте код из файла `google_apps_script_shift.js`
4. Замените `YOUR_GOOGLE_DRIVE_FOLDER_ID` на ID вашей папки
5. Сохраните проект

### Шаг 3: Разверните скрипт
1. Нажмите "Развернуть" → "Новое развертывание"
2. Выберите тип: "Веб-приложение"
3. Настройки:
   - Описание: "Shift Photos Uploader"
   - Выполнять от имени: "Меня"
   - У кого есть доступ: "Все"
4. Нажмите "Развернуть"
5. Скопируйте URL развертывания

### Шаг 4: Обновите URL в приложении
1. Откройте файл `lib/google_drive_service.dart`
2. Замените `YOUR_SCRIPT_ID` на URL вашего развертывания:
```dart
static const String scriptUrl = 'https://script.google.com/macros/s/YOUR_SCRIPT_ID/exec';
```

## 3. Настройка разрешений для камеры

### Android
Добавьте в `android/app/src/main/AndroidManifest.xml`:
```xml
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" android:required="false" />
```

### iOS
Добавьте в `ios/Runner/Info.plist`:
```xml
<key>NSCameraUsageDescription</key>
<string>Приложению нужен доступ к камере для фотографий пересменки</string>
```

## 4. Структура листа "Пересменка" в Google Sheets

Лист должен содержать:
- **Столбец A**: Вопрос
- **Столбец B**: Формат ответа (если "free" - требуется фото)
- **Столбец C**: Формат ответа (если "число" - только число)

Пример:
| A (Вопрос) | B (Формат) | C (Формат) |
|------------|------------|------------|
| Сколько чашек продано? | | число |
| Сделайте фото витрины | free | |
| Есть ли замечания? | | |

## 5. Проверка работы

1. Запустите приложение
2. Нажмите "Отчёт о смене"
3. Выберите сотрудника
4. Выберите магазин
5. Ответьте на вопросы
6. Проверьте, что отчет сохранился в "Отчет по пересменкам"

## 6. Важные замечания

- Отчеты автоматически удаляются через 7 дней
- Фото загружаются в Google Drive
- Синхронизация происходит автоматически при открытии приложения
- Можно принудительно обновить через кнопку "Обновить" в списке отчетов












